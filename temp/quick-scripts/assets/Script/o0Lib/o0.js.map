{"version":3,"sources":["o0.js"],"names":["module","exports","Random","arguments","length","seed","Date","getTime","nextSeed","Math","floor","Timer","second","interval","nextTiming","date","isDue","FixedTimer","fps","updateInterval","remainder","newTime","parseInt","FixedTimerDT","dt","Vector2","x","y","anotherVector","asin","sqrt","pow","anotherModVector","radian","PI","cosRadian","cos","sinRadian","sin","constructor","angle","rotate","num","mod","Line2","a","b","index","minus","vector","Rect","position","size","plus","vertex","edges","i","push","edge","value","Vector3","z","isSameSign","distance2","distance","maxLengthLine2","vertexs","maxLengthLine","maxLength","j","newLine","newLength","randomInCircle2","center","random","toLength","intersectionLineLine2","p11","p12","p21","p22","denominator","t","u","arrangeInLine1","p1","p2","values","ceil","arrangeInLine2","origin","begin","end","points","modVector","multiply","pointOnLineSegment","line","point","acceptableError","v1","v2","lineSegmentInRect","rect","ip","newIp","arrangeInRect2","horizontalVector","verticalVector","pos","verticalPoints","horizontalPoints","concat","blend","source","target","offsetRate","keyToArray","dictionary","array"],"mappings":"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","file":"o0.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\o0Lib","sourcesContent":["module.exports = {\r\n    Random: class{\r\n        constructor() {\r\n            if(arguments.length == 1){\r\n                this.seed = arguments[0];\r\n            }else{\r\n                this.seed = new Date().getTime();\r\n            }\r\n        }\r\n        nextSeed(){\r\n            this.seed = (this.seed * 9301 + 49297) % 233280;\r\n        }\r\n        float(){\r\n            this.nextSeed();\r\n            switch(arguments.length) {\r\n                case 0:\r\n                    return this.seed / 233280.0;\r\n                case 1:\r\n                    return this.seed / 233280.0 * arguments[0];\r\n                default:\r\n                case 2:\r\n                    return arguments[0] + this.seed / 233280.0 * (arguments[1] - arguments[0]);\r\n            }\r\n        }\r\n        int(){\r\n            this.nextSeed();\r\n            switch(arguments.length) {\r\n                case 0:\r\n                    return this.seed;\r\n                case 1:\r\n                    return Math.floor(this.seed / 233280.0 * arguments[0]);\r\n                default:\r\n                case 2:\r\n                    return Math.floor(arguments[0] + this.seed / 233280.0 * (arguments[1] - arguments[0]));\r\n            }\r\n        }\r\n    },\r\n    Timer: class{\r\n        constructor(second) {\r\n            this.interval = second * 1000;\r\n            this.nextTiming();\r\n        }\r\n        get isDue(){\r\n            return new Date().getTime() - this.date.getTime() >= this.interval;\r\n        }\r\n        nextTiming(){\r\n            this.date = new Date();\r\n        }\r\n        tryNextTiming(){\r\n            if(!this.isDue){\r\n                return false;\r\n            }\r\n            this.nextTiming();\r\n            return true;\r\n        }\r\n    },\r\n    FixedTimer:class{\r\n        constructor(fps) {\r\n            this.fps = fps;\r\n            this.updateInterval = 1000.0/fps;\r\n            this.remainder = 0;\r\n            this.nextTiming();\r\n        }\r\n        nextTiming(){\r\n            this.date = new Date();\r\n        }\r\n        fixedUpdateTimes(){\r\n            var newTime = new Date();\r\n            var interval = newTime.getTime() - this.date.getTime() + this.remainder;\r\n            this.date = newTime;\r\n            this.remainder = interval % this.updateInterval;\r\n\r\n            return parseInt(interval / this.updateInterval);\r\n        }\r\n    },\r\n    FixedTimerDT:class{\r\n        constructor(fps) {\r\n            this.fps = fps;\r\n            this.updateInterval = 1000.0/fps;\r\n            this.remainder = 0;\r\n        }\r\n        fixedUpdateTimes(dt){//time in second\r\n            var interval = dt*1000 + this.remainder;\r\n            this.remainder = interval % this.updateInterval;\r\n\r\n            //cc.log(parseInt(interval / this.updateInterval));\r\n            return parseInt(interval / this.updateInterval);\r\n        }\r\n    },\r\n    Vector2: class{\r\n        constructor() {\r\n            switch(arguments.length) {\r\n                default:\r\n                case 1:\r\n                    this.x = arguments[0].x;\r\n                    this.y = arguments[0].y;\r\n                    break;\r\n                case 2:\r\n                    this.x = arguments[0];\r\n                    this.y = arguments[1];\r\n                    break;\r\n            }\r\n        }\r\n        get length(){\r\n            if(this.x == 0 && this.y == 0)\r\n                return 0;\r\n            return Math.sqrt(this.x*this.x+this.y*this.y);\r\n        }/** */\r\n        get mod(){\r\n            var length = this.length;\r\n            return new this.constructor(this.x/length,this.y/length);\r\n        }/**/\r\n        radian(anotherVector){//都必须是长度为1的vector\r\n            return Math.asin(Math.sqrt(Math.pow(this.x - anotherVector.x,2)+Math.pow(this.y - anotherVector.y,2))/2)*2; \r\n        }\r\n        angle(anotherModVector){\r\n            return this.radian(anotherModVector)/Math.PI*180; \r\n        }\r\n        rotate(radian){\r\n            var cosRadian = Math.cos(radian);\r\n            var sinRadian = Math.sin(radian);\r\n            return new this.constructor(this.x * cosRadian + this.y * sinRadian, this.y * cosRadian - this.x * sinRadian);\r\n        }\r\n        rotateAngle(angle){\r\n            return this.rotate(angle / 180 * Math.PI);\r\n        }\r\n        plus(anotherVector){\r\n            return new this.constructor(this.x + anotherVector.x, this.y + anotherVector.y);\r\n        }\r\n        minus(anotherVector){\r\n            return new this.constructor(this.x - anotherVector.x, this.y - anotherVector.y);\r\n        }\r\n        multiply(num){\r\n            return new this.constructor(this.x * num, this.y * num);\r\n        }\r\n        toLength(length){\r\n            var mod = this.mod;\r\n            return new this.constructor(mod.x * length, mod.y * length);\r\n        }\r\n    },\r\n    Line2:class{\r\n        constructor() {\r\n            switch(arguments.length) {\r\n                default:\r\n                case 1:\r\n                    this.a = arguments[0].a;\r\n                    this.b = arguments[0].b;\r\n                    break;\r\n                case 2:\r\n                    this.a = arguments[0];\r\n                    this.b = arguments[1];\r\n                    break;\r\n                case 4:\r\n                    this.a = new module.exports.Vector2(arguments[0],arguments[1]);\r\n                    this.b = new module.exports.Vector2(arguments[2],arguments[3]);\r\n                    break;\r\n            }\r\n        }\r\n        vertex(index){\r\n            switch(index){\r\n                default:\r\n                case 0:\r\n                    return this.a;\r\n                case 1:\r\n                    return this.b;\r\n            }\r\n        }\r\n        get vector(){\r\n            return this.b.minus(this.a);\r\n        }\r\n        get length(){\r\n            return this.vector.length;\r\n        }\r\n    },\r\n    Rect:class{\r\n        constructor() {\r\n            switch(arguments.length) {\r\n                default:\r\n                case 1:\r\n                    this.position = arguments[0].position;\r\n                    this.size = arguments[0].size;\r\n                    break;\r\n                case 2:\r\n                    this.position = arguments[0];\r\n                    this.size = arguments[1];\r\n                    break;\r\n                case 4:\r\n                    this.position = new module.exports.Vector2(arguments[0],arguments[1]);\r\n                    this.size = new module.exports.Vector2(arguments[2],arguments[3]);\r\n                    break;\r\n            }\r\n        }\r\n        vertex(index){\r\n            switch(index){\r\n                default:\r\n                case 0:\r\n                    return this.position;\r\n                case 1:\r\n                    return new module.exports.Vector2(this.position.x,this.position.y+this.size.y);\r\n                case 2:\r\n                    return this.position.plus(this.size);\r\n                case 3:\r\n                    return new module.exports.Vector2(this.position.x+this.size.x,this.position.y);\r\n            }\r\n        }//Clockwise\r\n        edge(index){\r\n            switch(index){\r\n                default:\r\n                case 0:\r\n                    return new module.exports.Line2(this.vertex(0),this.vertex(1));\r\n                case 1:\r\n                    return new module.exports.Line2(this.vertex(1),this.vertex(2));\r\n                case 2:\r\n                    return new module.exports.Line2(this.vertex(2),this.vertex(3));\r\n                case 3:\r\n                    return new module.exports.Line2(this.vertex(3),this.vertex(0));\r\n            }\r\n        }//Clockwise\r\n        get vertexs(){\r\n            var edges = [];\r\n            for(var i = 0;i<4;++i){\r\n                edges.push(this.vertex(i));\r\n            }\r\n            return edges;\r\n        }\r\n        get edges(){\r\n            var edges = [];\r\n            for(var i = 0;i<4;++i){\r\n                edges.push(this.edge(i));\r\n            }\r\n            return edges;\r\n        }\r\n        get pos(){\r\n            return this.position;\r\n        }\r\n        set pos(value){\r\n            this.position = value;\r\n        }\r\n        get x(){\r\n            return this.position.x;\r\n        }\r\n        set x(value){\r\n            this.position.x = value;\r\n        }\r\n        get y(){\r\n            return this.position.y;\r\n        }\r\n        set y(value){\r\n            this.position.y = value;\r\n        }\r\n        get width(){\r\n            return this.size.x;\r\n        }\r\n        set width(value){\r\n            this.size.x = value;\r\n        }\r\n        get height(){\r\n            return this.size.y;\r\n        }\r\n        set height(value){\r\n            this.size.y = value;\r\n        }\r\n    },\r\n    Vector3: class{\r\n        constructor() {\r\n            switch(arguments.length) {\r\n                default:\r\n                case 1:\r\n                    this.x = arguments[0].x;\r\n                    this.y = arguments[0].y;\r\n                    this.z = arguments[0].z;\r\n                    break;\r\n                case 3:\r\n                    this.x = arguments[0];\r\n                    this.y = arguments[1];\r\n                    this.z = arguments[2];\r\n                    break;\r\n            }\r\n        }\r\n        get length(){\r\n            if(this.x == 0 && this.y == 0 && this.z == 0)\r\n                return 0;\r\n            return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);\r\n        }/** */\r\n        get mod(){\r\n            var length = this.length;\r\n            return new this.constructor(this.x/length,this.y/length,this.z/length);\r\n        }\r\n        plus(anotherVector){\r\n            return new this.constructor(this.x + anotherVector.x, this.y + anotherVector.y, this.z + anotherVector.z);\r\n        }\r\n        minus(anotherVector){\r\n            return new this.constructor(this.x - anotherVector.x, this.y - anotherVector.y, this.z - anotherVector.z);\r\n        }\r\n        multiply(num){\r\n            return new this.constructor(this.x * num, this.y * num, this.z * num);\r\n        }\r\n        toLength(length){\r\n            var mod = this.mod;\r\n            return new this.constructor(mod.x * length, mod.y * length, mod.z * length);\r\n        }\r\n    },\r\n    isSameSign:function(a,b){\r\n        if((a>=0&&b>=0)||(a<=0&&b<=0)){\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    distance2:function(a,b){\r\n        var distance = Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2));\r\n        switch(arguments.length) {\r\n            default:\r\n            case 2:\r\n                return distance;\r\n            case 3:\r\n                var vector = arguments[2];//vector must be in same line with a b\r\n                if(module.exports.isSameSign(b.x - a.x,vector.x)&&module.exports.isSameSign(b.y - a.y,vector.y)){\r\n                    return distance;\r\n                }else{\r\n                    return -distance;\r\n                }\r\n        }\r\n    },\r\n    maxLengthLine2:function(vertexs){\r\n        if(vertexs.length==0){\r\n            return null;\r\n        }\r\n        if(vertexs.length==1){\r\n            return new module.exports.Line2(vertexs[0],vertexs[0]);\r\n        }\r\n        var maxLengthLine = null;\r\n        var maxLength = -1;\r\n        for(var i = 0;i<vertexs.length-1;++i){            \r\n            for(var j = i+1;j<vertexs.length;++j){\r\n                var newLine = new module.exports.Line2(vertexs[i],vertexs[j]);\r\n                var newLength = newLine.length;\r\n                if(maxLength < newLength){\r\n                    maxLength = newLength;\r\n                    maxLengthLine = newLine;\r\n                }\r\n            }\r\n        }\r\n        return maxLengthLine;\r\n    },\r\n    randomInCircle2:function(){\r\n        var center;//diameter\r\n        var size;//diameter\r\n        switch(arguments.length) {\r\n            default:\r\n            case 1:\r\n                center = new module.exports.Vector2(0,0);\r\n                size = arguments[0];\r\n                break;\r\n            case 2:\r\n                center = arguments[0];\r\n                size = arguments[1];\r\n                break;\r\n        }\r\n        return new module.exports.Vector2(1,0).rotate(Math.random() * Math.PI*2).toLength(Math.sqrt(Math.random()*Math.pow(size/2,2))).plus(center);\r\n    },\r\n    intersectionLineLine2:function(){//for 2D //https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection\r\n        var p11,p12,p21,p22;\r\n        switch(arguments.length) {\r\n            default:\r\n            case 4:\r\n                p11 = arguments[0];\r\n                p12 = arguments[1];\r\n                p21 = arguments[2];\r\n                p22 = arguments[3];\r\n                break;\r\n            case 2:\r\n                p11 = arguments[0].a;\r\n                p12 = arguments[0].b;\r\n                p21 = arguments[1].a;\r\n                p22 = arguments[1].b;\r\n                break;\r\n        }\r\n        var denominator = (p11.x-p12.x)*(p21.y-p22.y) - (p11.y-p12.y)*(p21.x-p22.x);\r\n        if(denominator == 0){\r\n            return null;\r\n        }\r\n        var t = ((p11.x-p21.x)*(p21.y-p22.y) - (p11.y-p21.y)*(p21.x-p22.x))/denominator;\r\n        var u = ((p11.x-p12.x)*(p11.y-p21.y) - (p11.y-p12.y)*(p11.x-p21.x))/denominator;\r\n        return new module.exports.Vector2(p11.x+t*(p12.x-p11.x),p11.y+t*(p12.y-p11.y));\r\n    },\r\n    arrangeInLine1:function(p1, p2, vector){//1维//vector为正,p1小于p2\r\n        var values = [];\r\n        for(var i =  Math.ceil(p1/vector)*vector;i<=p2;i+=vector){\r\n            values.push(i);\r\n        }\r\n        return values;\r\n    },\r\n    arrangeInLine2:function(){//3点必须在1线\r\n        //return [];\r\n        var p1, p2, origin, vector;\r\n        switch(arguments.length) {\r\n            default:\r\n            case 4:\r\n                p1 = arguments[0];\r\n                p2 = arguments[1];\r\n                origin = arguments[2];\r\n                vector = arguments[3];\r\n                break;\r\n            case 3:\r\n                if(arguments[0] == null){\r\n                    return [];\r\n                } \r\n                p1 = arguments[0].a;\r\n                p2 = arguments[0].b;\r\n                origin = arguments[1];\r\n                vector = arguments[2];\r\n                break;\r\n        }\r\n        var begin,end;\r\n        if(module.exports.isSameSign(p2.x - p1.x,vector.x)&&module.exports.isSameSign(p2.y - p1.y,vector.y)){\r\n            begin = p1;\r\n            end = p2;\r\n        }else{\r\n            begin = p2;\r\n            end = p1;\r\n        }\r\n        if(module.exports.isSameSign(begin.x - origin.x,vector.x)&&module.exports.isSameSign(begin.y - origin.y,vector.y)){\r\n            begin = module.exports.distance2(origin,begin);\r\n        }else{\r\n            begin = -module.exports.distance2(origin,begin);\r\n        }\r\n        if(module.exports.isSameSign(end.x - origin.x,vector.x)&&module.exports.isSameSign(end.y - origin.y,vector.y)){\r\n            end = module.exports.distance2(origin,end);\r\n        }else{\r\n            end = -module.exports.distance2(origin,end);\r\n        }\r\n        var points = [];\r\n        var modVector = vector.mod;\r\n        var values = module.exports.arrangeInLine1(begin, end, vector.length);\r\n        for(var i = 0;i<values.length;++i){\r\n            points.push(origin.plus(modVector.multiply(values[i])));\r\n        }\r\n        return points;/** */        \r\n    },\r\n    pointOnLineSegment(line,point){\r\n        var acceptableError = line.length / 1000000;//存在计算误差\r\n        var v1 = line.a.minus(point);\r\n        var v2 = line.b.minus(point);\r\n        if(module.exports.isSameSign(v1.x,v2.x)&&module.exports.isSameSign(v1.y,v2.y)&&v1.length>=acceptableError&&v2.length>=acceptableError){//存在计算误差\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    lineSegmentInRect(rect,line){\r\n        var edge = rect.edges;\r\n        var ip = [];\r\n        for(var i = 0;i<edge.length;++i){\r\n            var newIp = module.exports.intersectionLineLine2(edge[i], line);\r\n            if(newIp != null &&module.exports.pointOnLineSegment(edge[i],newIp)){\r\n                ip.push(newIp);\r\n            }\r\n        }\r\n        return module.exports.maxLengthLine2(ip);/** */\r\n    },\r\n    arrangeInRect2:function(rect, origin, horizontalVector, verticalVector){\r\n        var ip = [];\r\n        for(var i = 0; i < 4;++i){\r\n            ip.push(module.exports.intersectionLineLine2(origin,origin.plus(verticalVector),rect.vertex(i),rect.vertex(i).plus(horizontalVector)));\r\n        }\r\n        if(module.exports.distance2(ip[0],ip[2]) > module.exports.distance2(ip[1],ip[3])){\r\n            ip = [ip[0],ip[2],ip[1],ip[3]];//verticalBegin;verticalEnd;horizontalBegin;horizontalEnd;\r\n        }else{\r\n            ip = [ip[1],ip[3],ip[0],ip[2]];//verticalBegin;verticalEnd;horizontalBegin;horizontalEnd;\r\n        }\r\n        var pos = [];\r\n        var verticalPoints = module.exports.arrangeInLine2(ip[0],ip[1],origin,verticalVector);\r\n        for(var i = 0; i<verticalPoints.length;++i){\r\n            var lineSegmentInRect = module.exports.lineSegmentInRect(rect,new module.exports.Line2(verticalPoints[i],verticalPoints[i].plus(horizontalVector)));//}/*\r\n            var horizontalPoints = module.exports.arrangeInLine2(lineSegmentInRect,verticalPoints[i],horizontalVector);\r\n            pos = pos.concat(horizontalPoints);\r\n        }\r\n        return pos;/** */\r\n        //return verticalPoints;\r\n    },\r\n    blend(source,target,offsetRate){//一个值向另一个值偏移一定比例\r\n        return source + (target - source) * offsetRate;\r\n    },\r\n    keyToArray(dictionary){\r\n        var array = [];\r\n        for(var i in dictionary){\r\n            array.push(i);\r\n        }\r\n        return array;\r\n    },\r\n};"]}