{"version":3,"sources":["MODGame.js"],"names":["o0","require","o0CC","o0Game","cc","Class","extends","Component","properties","canvas","default","type","Canvas","UINode","Node","camera","Camera","gameNode","map","players","chainsaws","onLoad","director","getPhysicsManager","gravity","v2","start","node","getComponent","log","addNode","addComponent","addTarget","attachDebugDrawToCamera","getCollisionManager","i","push","setPosition","initPositions","name","connect","update","dt","screen","view","getVisibleSize","scale","height","zoomRatio"],"mappings":"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","file":"MODGame.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\nvar o0 = require('o0');\nvar o0CC = require('o0CC');\nvar o0Game = require('o0Game');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        canvas: {\n            default: null,\n            type: cc.Canvas\n        },\n        UINode: {\n            default: null,\n            type: cc.Node\n        },\n        camera: {\n            default: null,\n            type: cc.Camera\n        },\n        gameNode: {\n            default: null,\n            type: cc.Node\n        },\n        map:null,\n        players:[],\n        chainsaws:[],\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        //cc.director.getPhysicsManager().gravity = cc.v2(0, 0);//\n        cc.director.getPhysicsManager().gravity = cc.v2(0, -4000);//\n\n    },\n    // use this for initialization\n    start: function () {\n        if(this.canvas == null){\n            this.canvas = this.node.getComponent(cc.Canvas);\n            if(this.canvas == null){\n                o0CC.log('canvas null')\n            }\n        }\n        this.gameNode = o0CC.addNode(this.canvas.node,0);\n        this.UINode = o0CC.addNode(this.canvas.node,1);\n        this.camera = this.UINode.addComponent(cc.Camera);\n        this.camera.addTarget(this.gameNode);\n        this.camera.addTarget(this.UINode);\n        cc.director.getPhysicsManager().attachDebugDrawToCamera(this.camera);\n        cc.director.getCollisionManager().attachDebugDrawToCamera(this.camera);/** */\n        //cc.director.getPhysicsManager().gravity = cc.v2(0, 0);//\n        //cc.director.getPhysicsManager().gravity = cc.v2(0, -640);//\n\n\n        this.map = o0CC.addNode(this.gameNode,0,'MODMap001').getComponent('MODMap001');\n        for(var i = 0;i<4;++i){\n            this.players.push(o0CC.addNode(this.gameNode,0,'MODCharacter').getComponent('MODCharacter'));\n            this.players[i].node.setPosition(this.map.initPositions[i]);\n            this.players[i].name = 'player '+i;\n            this.chainsaws.push(o0CC.addNode(this.gameNode,0,'MODChainsaw').getComponent('MODChainsaw'));\n            this.chainsaws[i].node.setPosition(this.map.initPositions[i]);\n            this.chainsaws[i].connect(this.players[i]);\n            this.chainsaws[i].name = 'chainsaw '+i;\n        }\n        this.players[0].addComponent('MODControl');\n        //o0CC.setGroup(this.players[0].getComponent('MODCharacter'),1);\n        //this.players.push(o0CC.addNode(this.gameNode,0,'MODCharacter'));\n\n        \n    },\n\n    // called every frame\n    update: function (dt) {\n        var screen = cc.view.getVisibleSize();\n        var scale = screen.height / 1000.0;\n        this.camera.zoomRatio = scale;/** */\n    }\n});\n\n\n"]}